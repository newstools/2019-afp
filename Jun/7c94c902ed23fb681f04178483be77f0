North Korean leader Kim Jong Un welcomed Chinese President Xi Jinping to Pyongyang on Thursday on a historic visit to burnish an uneasy alliance, with the two men each facing challenges of their own with US President Donald Trump. Xi is the first Chinese president to visit North Korea in 14 years, after relations between the Cold War era allies deteriorated over Pyongyang's nuclear provocations and Beijing's subsequent backing of UN sanctions. But as he embarked on a flurry of diplomacy last year, Kim ensured that Xi -- the leader of his country's key diplomatic supporter and main provider of trade and aid -- was the first head of state he met. The North Korean leader has now visited his older ally four times in China and Pyongyang has been increasingly keen for Xi to reciprocate, while according to diplomats Beijing has been biding its time to see how nuclear talks between Kim and Trump play out. But Beijing's own trade negotiations with Washington hit a wall last month and some analysts say Xi is now looking for leverage ahead of his meeting with Trump at next week's G20 summit in Japan. "When both China & North Korea are confronted by US, they have a lot to discuss with each other," Lijian Zhao, the deputy chief of mission of China's embassy in Pakistan, wrote on Twitter. Pyongyang wants to demonstrate to Trump that it has China's support with the nuclear negotiations at a standstill after Trump and Kim's second summit broke up without a deal. At their formal talks, according to Chinese state broadcaster CCTV, Kim told Xi that the North had taken "many positive measures to avoid a tense situation" over the past year, "but has not received positive responses from the relevant parties". "This is not what the DPRK wants to see," CCTV's voiceover cited him as adding. For Pyongyang, the visit "will serve to show the US that China has its back and to send a message to Washington it should stop its maximum pressure posture", said Lim Eul-chul, professor of North Korean studies at Kyungnam University. - 'Positively evaluated' - According to Chinese state media Xi told Kim that he "positively evaluated" the North's efforts and was "willing to strengthen coordination and cooperation with the DPRK and all relevant parties". China has fretted over being sidelined by diplomatic developments since last year, with Trump going as far as declaring he had fallen "in love" with Kim, and the comment was a clear assertion of Beijing's place in the negotiations. "Xi wants everyone to remain acutely aware that he can influence Kim, and that no comprehensive, durable deal with North Korea can occur without China's assistance -- and approval," Scott Seaman, Asia director of the Eurasia Group consultancy, said in a research note. - 21-gun salute - Kim met Xi at Pyongyang airport as he began a two-day state visit with his wife Peng Liyuan, Foreign Minister Wang Yi, and other officials, television images showed. Portraits of the two leaders stood outside the terminal, pictures showed, and a 21-gun salute was fired before the pair drove into the capital together, standing in a convertible Mercedes Benz past tens of thousands of cheering residents lining the streets and more waving from their windows. Pyongyang always puts on an impressive show when a foreign leader visits but in an unprecedented move, Xi was welcomed at the Kumsusan Palace, the mausoleum where the preserved bodies of the North's founder Kim Il Sung and his successor Kim Jong Il -- the grandfather and father of the current leader -- lie in state. The Rodong Sinmun newspaper, the mouthpiece of the ruling party, devoted the top half of its front page to the visit, with a colour picture of Xi, a day after it carried an article by him, also on the front page. The show of amity belies a sometimes strained relationship -- Kim did not visit Beijing to pay his respects for more than six years after inheriting power. Authorities have imposed tight restrictions on other media, with international journalists in Pyongyang not allowed to cover the visit, and no non-Chinese foreign media organisations given visas. Beijing sees the North as a strategic buffer, keeping the 28,500 US troops in South Korea far from its borders, and Xi's trip was to include a stop at Pyongyang's Friendship Tower, which commemorates the millions of Chinese troops who saved Kim Il Sung's forces from defeat during the Korean War.