Chile said Friday it will hold a referendum to replace the country's dictatorship-era constitution -- a key demand of protesters after nearly a month of violent civil unrest. The announcement sent the stock market soaring over eight percent -- the biggest daily rise in a decade -- and sparked a recovery by the peso, which was up 3.2 percent. Lawmakers in Chile's National Congress agreed early Friday to hold the vote in April 2020 after hours of intense negotiations between the governing coalition and opposition parties. Government spokeswoman Karla Rubilar hailed a "huge agreement" that allowed diverse political forces to talk out their differences and give a "signal of unity." Thousands took to the streets of Santiago on Friday afternoon, however, crowding into the protest epicenter of Plaza Italia, and violent clashes broke out between small groups of protests and police in the late afternoon. The charter in force since 1980 and enacted by the former military junta of Augusto Pinochet has been changed numerous times. But it does not establish the state's responsibility to provide education and healthcare -- two demands made by millions of Chileans who have taken to the streets. "This agreement is a first step, but it is a historic and fundamental first step to start building our new social pact, and in this the citizenry will have a leading role," said Interior Minister Gonzalo Blumel. - 'Destiny' - The referendum will ask voters whether the constitution should be replaced and if so, how a new charter should be drafted, Senate President Jaime Quintana said. "It is a political response in the most noble sense of the term, the policy that thinks of Chile, which is taking its destiny in hand and which is assuming its responsibilities," said Quintana, from the center-left opposition. The Santiago Stock Exchange closed up 8.1 percent on the news, recuperating around half its losses since the beginning of the crisis. The peso recovered from record losses earlier this week, rising 3.2 percent to trade at 777.29 to the dollar. "We are happy to have reached an agreement that marks a victory against violence," said Jacqueline van Rysselberghe, head of the Independent Democratic Union party, a pillar of Pinera's coalition. Not everyone was convinced, though. "All the attention is on the constitution but there are more pressing things: pensions, education," Raul Opazo, a 39-year-old teacher, told AFP. The political agreement "solves nothing," said cleaner Leslie, 27. "What about our social demands?" - Weeks of unrest - The unrest that began on October 18 with protests against a rise in rush-hour metro fares has mushroomed into a broader outcry against the status quo, with burning, looting and daily confrontations between demonstrators and police. The crisis is Chile's biggest since its return to democracy in 1990, leaving 20 dead -- five at the hands of state forces -- and more than 1,000 injured. Demonstrators have demanded greater social reform from the government led by President Sebastian Pinera, who has announced several measures in a bid to assuage public anger. After weeks of sometimes violent demonstrations, most polls show the protest movement is supported by 75 percent of Chileans. Even more -- 87 percent, according to a survey by pollster Cadem published this month -- say they favor the protesters' demand for constitutional reforms. Approved in 1980, Chile's junta-era constitution preserved some powers of the military and established an electoral system that long favored the political right-wing. Changes in 2005 removed most remaining anti-democratic aspects of the charter, ending the appointment of non-elected senators and allowing civilian authorities to dismiss military chiefs. "The constitution of the dictatorship has died," progressive senator and former foreign minister Heraldo Munoz said after Friday's vote. A few days after Pinera became president last year, his government announced it would not allow the consideration of a bill to amend the constitution that his socialist predecessor Michelle Bachelet had submitted to congress.